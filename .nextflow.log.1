Nov-05 13:56:59.121 [main] DEBUG nextflow.cli.Launcher - $> nextflow run cellgeni/nf-irods-to-fastq -r main main.nf --findmeta /tmp/sample_ids.lJ1t4I.csv --cram2fastq --publish_dir /lustre/scratch126/cellgen/team298/data/samples/fastq
Nov-05 13:56:59.285 [main] DEBUG nextflow.cli.CmdRun - N E X T F L O W  ~  version 24.04.4
Nov-05 13:56:59.313 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/nfs/users/nfs_l/lg28/.nextflow/plugins; core-plugins: nf-amazon@2.5.3,nf-azure@1.6.1,nf-cloudcache@0.4.1,nf-codecommit@0.2.1,nf-console@1.1.3,nf-ga4gh@1.3.0,nf-google@1.13.2-patch1,nf-tower@1.9.1,nf-wave@1.4.2-patch1
Nov-05 13:56:59.331 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Nov-05 13:56:59.332 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Nov-05 13:56:59.337 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.12.0 in 'deployment' mode
Nov-05 13:56:59.356 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Nov-05 13:56:59.375 [main] DEBUG nextflow.scm.ProviderConfig - Using SCM config path: /nfs/users/nfs_l/lg28/.nextflow/scm
Nov-05 13:57:00.331 [main] DEBUG nextflow.scm.AssetManager - Git config: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/.git/config; branch: master; remote: origin; url: https://github.com/cellgeni/nf-irods-to-fastq.git
Nov-05 13:57:00.405 [main] DEBUG nextflow.scm.RepositoryFactory - Found Git repository result: [RepositoryFactory]
Nov-05 13:57:00.427 [main] DEBUG nextflow.scm.AssetManager - Git config: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/.git/config; branch: master; remote: origin; url: https://github.com/cellgeni/nf-irods-to-fastq.git
Nov-05 13:57:01.292 [main] DEBUG nextflow.config.ConfigBuilder - Found config base: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/nextflow.config
Nov-05 13:57:01.296 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/nextflow.config
Nov-05 13:57:01.311 [main] DEBUG n.secret.LocalSecretsProvider - Secrets store: /nfs/users/nfs_l/lg28/.nextflow/secrets/store.json
Nov-05 13:57:01.317 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@1ab14636] - activable => nextflow.secret.LocalSecretsProvider@1ab14636
Nov-05 13:57:01.341 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Nov-05 13:57:01.601 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 by global default
Nov-05 13:57:01.602 [main] DEBUG nextflow.cli.CmdRun - Launching `https://github.com/cellgeni/nf-irods-to-fastq` [fabulous_coulomb] DSL2 - revision: 0579112e1b [main]
Nov-05 13:57:01.605 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Nov-05 13:57:01.606 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Nov-05 13:57:01.735 [main] DEBUG nextflow.Session - Session UUID: 1b057bf2-1322-4100-b4e2-daf2212ff757
Nov-05 13:57:01.736 [main] DEBUG nextflow.Session - Run name: fabulous_coulomb
Nov-05 13:57:01.736 [main] DEBUG nextflow.Session - Executor pool size: 64
Nov-05 13:57:01.754 [main] DEBUG nextflow.file.FilePorter - File porter settings maxRetries=3; maxTransfers=50; pollTimeout=null
Nov-05 13:57:01.767 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-05 13:57:01.811 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 24.04.4 build 5917
  Created: 01-08-2024 07:05 UTC (08:05 BST)
  System: Linux 5.15.0-121-generic
  Runtime: Groovy 4.0.21 on OpenJDK 64-Bit Server VM 11.0.24+8-post-Ubuntu-1ubuntu322.04
  Encoding: UTF-8 (UTF-8)
  Process: 2229036@farm22-head1 [10.160.8.96]
  CPUs: 64 - Mem: 754.6 GB (280.4 GB) - Swap: 66.3 GB (61 GB)
Nov-05 13:57:01.846 [main] DEBUG nextflow.Session - Work-dir: /nfs/users/nfs_l/lg28/work [nfs]
Nov-05 13:57:01.949 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[GoogleLifeSciencesExecutor, AwsBatchExecutor, GoogleBatchExecutor]
Nov-05 13:57:01.985 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Nov-05 13:57:01.995 [main] DEBUG nextflow.Session - Observer factory: WaveFactory
Nov-05 13:57:01.996 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Nov-05 13:57:02.075 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Nov-05 13:57:02.101 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 65; maxThreads: 1000
Nov-05 13:57:02.221 [main] DEBUG nextflow.Session - Session start
Nov-05 13:57:02.999 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Nov-05 13:57:03.492 [main] WARN  nextflow.NextflowMeta$Preview - WORKFLOW OUTPUT DSL IS A PREVIEW FEATURE - SYNTAX AND FUNCTIONALITY CAN CHANGE IN FUTURE RELEASES
Nov-05 13:57:03.722 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:findCrams
Nov-05 13:57:03.734 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:03.734 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:03.743 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Nov-05 13:57:03.752 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=64; memory=754.6 GB; capacity=64; pollInterval=100ms; dumpInterval=5m
Nov-05 13:57:03.758 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Nov-05 13:57:03.880 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:getMetadata
Nov-05 13:57:03.888 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:03.888 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:03.911 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:parseMetadata
Nov-05 13:57:03.913 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:03.913 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:03.942 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:combineMetadata
Nov-05 13:57:03.944 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:03.944 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:03.956 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:normal` matches labels `normal` for process with name downloadcrams:downloadCram
Nov-05 13:57:03.958 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: lsf
Nov-05 13:57:03.958 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'lsf'
Nov-05 13:57:03.967 [main] DEBUG nextflow.executor.Executor - [warm up] executor > lsf
Nov-05 13:57:03.970 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'lsf' > capacity: 100; pollInterval: 5s; dumpInterval: 5m 
Nov-05 13:57:03.971 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: lsf)
Nov-05 13:57:03.973 [main] DEBUG n.executor.AbstractGridExecutor - Creating executor 'lsf' > queue-stat-interval: 1m
Nov-05 13:57:03.977 [main] DEBUG nextflow.executor.LsfExecutor - [LSF] Detected lsf.conf LSF_UNIT_FOR_LIMITS=MB
Nov-05 13:57:03.992 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:normal` matches labels `normal` for process with name downloadcrams:cramToFastq
Nov-05 13:57:03.994 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: lsf
Nov-05 13:57:03.994 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'lsf'
Nov-05 13:57:04.015 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:normal` matches labels `normal` for process with name downloadcrams:calculateReadLength
Nov-05 13:57:04.018 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: lsf
Nov-05 13:57:04.018 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'lsf'
Nov-05 13:57:04.041 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name downloadcrams:renameATAC
Nov-05 13:57:04.043 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:04.043 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:04.066 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name downloadcrams:saveMetaToJson
Nov-05 13:57:04.067 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:04.068 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:04.078 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name downloadcrams:updateMetadata
Nov-05 13:57:04.081 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 13:57:04.082 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 13:57:04.120 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: getMetadata, downloadcrams:updateMetadata, downloadcrams:saveMetaToJson, downloadcrams:renameATAC, downloadcrams:cramToFastq, findCrams, calculateReadLength, downloadcrams:downloadCram, downloadcrams:calculateReadLength, cramToFastq, downloadCram, renameATAC, saveMetaToJson, updateMetadata, findmeta:findCrams, concatFastqs, findmeta:getMetadata, findmeta:combineMetadata, uploadFTP, findmeta:parseMetadata, parseMetadata, combineMetadata
Nov-05 13:57:04.121 [main] DEBUG nextflow.Session - Igniting dataflow network (11)
Nov-05 13:57:04.129 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:findCrams
Nov-05 13:57:04.130 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:getMetadata
Nov-05 13:57:04.131 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:parseMetadata
Nov-05 13:57:04.131 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:combineMetadata
Nov-05 13:57:04.132 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:downloadCram
Nov-05 13:57:04.132 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:cramToFastq
Nov-05 13:57:04.133 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:calculateReadLength
Nov-05 13:57:04.133 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:renameATAC
Nov-05 13:57:04.133 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:saveMetaToJson
Nov-05 13:57:04.134 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:updateMetadata
Nov-05 13:57:04.136 [main] DEBUG nextflow.script.ScriptRunner - Parsed script files:
  Script_14578705ffc52c59: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/./modules/upload2ftp.nf
  Script_5745e879b58ba523: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/./modules/getfiles.nf
  Script_837af72cfbdb1352: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/main.nf
  Script_a8b23561f1a651ac: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/./modules/metatable.nf
Nov-05 13:57:04.136 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Nov-05 13:57:04.136 [main] DEBUG nextflow.Session - Session await
Nov-05 13:57:04.253 [Actor Thread 34] DEBUG i.s.wave.plugin.config.WaveConfig - Wave strategy not specified - using default: [container, dockerfile, conda, spack]
Nov-05 13:57:04.263 [Actor Thread 34] DEBUG io.seqera.wave.plugin.WaveClient - Wave config: WaveConfig(enabled:null, endpoint:https://wave.seqera.io, containerConfigUrl:[], tokensCacheMaxDuration:30m, condaOpts:CondaOpts(mambaImage=mambaorg/micromamba:1.5.8-lunar; basePackages=conda-forge::procps-ng, commands=null), spackOpts:SpackOpts(basePackages=null, commands=null), strategy:[container, dockerfile, conda, spack], bundleProjectResources:null, buildRepository:null, cacheRepository:null, retryOpts:RetryOpts(delay:450ms, maxDelay:1m 30s, maxAttempts:10, jitter:0.25), httpClientOpts:HttpOpts(), freezeMode:null, preserveFileTimestamp:null)
Nov-05 13:57:04.439 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 13:57:04.443 [Task submitter] INFO  nextflow.Session - [9c/33e081] Submitted process > findmeta:findCrams (Searching files for sample HCA_SkO13919077)
Nov-05 13:57:05.361 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: findmeta:findCrams (Searching files for sample HCA_SkO13919077); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/9c/33e08157e014c128dcf8a3dd877abf]
Nov-05 13:57:05.362 [Task monitor] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'TaskFinalizer' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-05 13:57:05.406 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 13:57:05.406 [Task submitter] INFO  nextflow.Session - [fb/e18349] Submitted process > findmeta:getMetadata (Getting metadata for /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram)
Nov-05 13:57:06.270 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: findmeta:getMetadata (Getting metadata for /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/fb/e18349149ede61d85102b9a16a02a9]
Nov-05 13:57:06.321 [Actor Thread 51] DEBUG nextflow.util.HashBuilder - Hash asset file sha-256: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/bin/parser.py
Nov-05 13:57:06.339 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 13:57:06.339 [Task submitter] INFO  nextflow.Session - [79/dae8ff] Submitted process > findmeta:parseMetadata (Parsing metadata for HCA_SkO13919077)
Nov-05 13:57:06.403 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 3; name: findmeta:parseMetadata (Parsing metadata for HCA_SkO13919077); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/79/dae8ffaa1b60cc7e562ebc65018f2f]
Nov-05 13:57:06.420 [Actor Thread 62] DEBUG nextflow.util.HashBuilder - Hash asset file sha-256: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/bin/combine_meta.py
Nov-05 13:57:06.434 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 13:57:06.434 [Task submitter] INFO  nextflow.Session - [97/930112] Submitted process > findmeta:combineMetadata (Combining the metadata for all files to metadata.csv)
Nov-05 13:57:06.522 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 4; name: findmeta:combineMetadata (Combining the metadata for all files to metadata.csv); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/97/93011266e56db91e59ac125c780ec4]
Nov-05 13:57:06.545 [TaskFinalizer-4] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'PublishDir' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-05 13:57:06.776 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [LSF] submitted process downloadcrams:downloadCram (Loading /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram) > jobId: 232833; workDir: /nfs/users/nfs_l/lg28/work/c6/12de19dd0b6cb08897f3dcf0e4540b
Nov-05 13:57:06.776 [Task submitter] INFO  nextflow.Session - [c6/12de19] Submitted process > downloadcrams:downloadCram (Loading /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram)
Nov-05 13:59:08.983 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 232833; id: 5; name: downloadcrams:downloadCram (Loading /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/c6/12de19dd0b6cb08897f3dcf0e4540b started: 1730815028973; exited: 2024-11-05T13:59:04.548574Z; ]
Nov-05 13:59:09.384 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [LSF] submitted process downloadcrams:cramToFastq (Converting cram to fastq: /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram) > jobId: 232858; workDir: /nfs/users/nfs_l/lg28/work/c5/adc6218cea513fe2ac6b5b490633fd
Nov-05 13:59:09.385 [Task submitter] INFO  nextflow.Session - [c5/adc621] Submitted process > downloadcrams:cramToFastq (Converting cram to fastq: /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram)
