Nov-05 14:30:08.329 [main] DEBUG nextflow.cli.Launcher - $> nextflow run cellgeni/nf-irods-to-fastq -r main main.nf --findmeta /tmp/sample_ids.qOacNl.csv --cram2fastq --publish_dir /lustre/scratch126/cellgen/team298/data/samples/fastq
Nov-05 14:30:08.497 [main] DEBUG nextflow.cli.CmdRun - N E X T F L O W  ~  version 24.04.4
Nov-05 14:30:08.524 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/nfs/users/nfs_l/lg28/.nextflow/plugins; core-plugins: nf-amazon@2.5.3,nf-azure@1.6.1,nf-cloudcache@0.4.1,nf-codecommit@0.2.1,nf-console@1.1.3,nf-ga4gh@1.3.0,nf-google@1.13.2-patch1,nf-tower@1.9.1,nf-wave@1.4.2-patch1
Nov-05 14:30:08.540 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Nov-05 14:30:08.542 [main] INFO  o.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Nov-05 14:30:08.547 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.12.0 in 'deployment' mode
Nov-05 14:30:08.564 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Nov-05 14:30:08.581 [main] DEBUG nextflow.scm.ProviderConfig - Using SCM config path: /nfs/users/nfs_l/lg28/.nextflow/scm
Nov-05 14:30:09.307 [main] DEBUG nextflow.scm.AssetManager - Git config: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/.git/config; branch: master; remote: origin; url: https://github.com/cellgeni/nf-irods-to-fastq.git
Nov-05 14:30:09.356 [main] DEBUG nextflow.scm.RepositoryFactory - Found Git repository result: [RepositoryFactory]
Nov-05 14:30:09.371 [main] DEBUG nextflow.scm.AssetManager - Git config: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/.git/config; branch: master; remote: origin; url: https://github.com/cellgeni/nf-irods-to-fastq.git
Nov-05 14:30:10.097 [main] DEBUG nextflow.config.ConfigBuilder - Found config base: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/nextflow.config
Nov-05 14:30:10.099 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/nextflow.config
Nov-05 14:30:10.110 [main] DEBUG n.secret.LocalSecretsProvider - Secrets store: /nfs/users/nfs_l/lg28/.nextflow/secrets/store.json
Nov-05 14:30:10.114 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@6fa02932] - activable => nextflow.secret.LocalSecretsProvider@6fa02932
Nov-05 14:30:10.130 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Nov-05 14:30:10.301 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 by global default
Nov-05 14:30:10.302 [main] DEBUG nextflow.cli.CmdRun - Launching `https://github.com/cellgeni/nf-irods-to-fastq` [spontaneous_hamilton] DSL2 - revision: 0579112e1b [main]
Nov-05 14:30:10.304 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Nov-05 14:30:10.305 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Nov-05 14:30:10.399 [main] DEBUG nextflow.Session - Session UUID: 1db0d1bf-8482-4ac7-b9a1-f20a79f6a665
Nov-05 14:30:10.399 [main] DEBUG nextflow.Session - Run name: spontaneous_hamilton
Nov-05 14:30:10.400 [main] DEBUG nextflow.Session - Executor pool size: 64
Nov-05 14:30:10.412 [main] DEBUG nextflow.file.FilePorter - File porter settings maxRetries=3; maxTransfers=50; pollTimeout=null
Nov-05 14:30:10.421 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-05 14:30:10.452 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 24.04.4 build 5917
  Created: 01-08-2024 07:05 UTC (08:05 BST)
  System: Linux 5.15.0-121-generic
  Runtime: Groovy 4.0.21 on OpenJDK 64-Bit Server VM 11.0.24+8-post-Ubuntu-1ubuntu322.04
  Encoding: UTF-8 (UTF-8)
  Process: 3615313@farm22-head1 [10.160.8.96]
  CPUs: 64 - Mem: 754.6 GB (266 GB) - Swap: 66.3 GB (61 GB)
Nov-05 14:30:10.481 [main] DEBUG nextflow.Session - Work-dir: /nfs/users/nfs_l/lg28/work [nfs]
Nov-05 14:30:10.546 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[GoogleLifeSciencesExecutor, AwsBatchExecutor, GoogleBatchExecutor]
Nov-05 14:30:10.565 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Nov-05 14:30:10.571 [main] DEBUG nextflow.Session - Observer factory: WaveFactory
Nov-05 14:30:10.572 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Nov-05 14:30:10.606 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Nov-05 14:30:10.620 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 65; maxThreads: 1000
Nov-05 14:30:10.720 [main] DEBUG nextflow.Session - Session start
Nov-05 14:30:11.282 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Nov-05 14:30:11.691 [main] WARN  nextflow.NextflowMeta$Preview - WORKFLOW OUTPUT DSL IS A PREVIEW FEATURE - SYNTAX AND FUNCTIONALITY CAN CHANGE IN FUTURE RELEASES
Nov-05 14:30:11.903 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:findCrams
Nov-05 14:30:11.913 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:11.913 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:11.919 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Nov-05 14:30:11.930 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=64; memory=754.6 GB; capacity=64; pollInterval=100ms; dumpInterval=5m
Nov-05 14:30:11.940 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Nov-05 14:30:12.034 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:getMetadata
Nov-05 14:30:12.039 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:12.040 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:12.058 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:parseMetadata
Nov-05 14:30:12.059 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:12.059 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:12.083 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name findmeta:combineMetadata
Nov-05 14:30:12.085 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:12.085 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:12.096 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:normal` matches labels `normal` for process with name downloadcrams:downloadCram
Nov-05 14:30:12.097 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: lsf
Nov-05 14:30:12.098 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'lsf'
Nov-05 14:30:12.105 [main] DEBUG nextflow.executor.Executor - [warm up] executor > lsf
Nov-05 14:30:12.108 [main] DEBUG n.processor.TaskPollingMonitor - Creating task monitor for executor 'lsf' > capacity: 100; pollInterval: 5s; dumpInterval: 5m 
Nov-05 14:30:12.109 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: lsf)
Nov-05 14:30:12.111 [main] DEBUG n.executor.AbstractGridExecutor - Creating executor 'lsf' > queue-stat-interval: 1m
Nov-05 14:30:12.114 [main] DEBUG nextflow.executor.LsfExecutor - [LSF] Detected lsf.conf LSF_UNIT_FOR_LIMITS=MB
Nov-05 14:30:12.125 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:normal` matches labels `normal` for process with name downloadcrams:cramToFastq
Nov-05 14:30:12.127 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: lsf
Nov-05 14:30:12.128 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'lsf'
Nov-05 14:30:12.147 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:normal` matches labels `normal` for process with name downloadcrams:calculateReadLength
Nov-05 14:30:12.151 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: lsf
Nov-05 14:30:12.151 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'lsf'
Nov-05 14:30:12.174 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name downloadcrams:renameATAC
Nov-05 14:30:12.175 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:12.176 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:12.192 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name downloadcrams:saveMetaToJson
Nov-05 14:30:12.194 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:12.194 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:12.201 [main] DEBUG nextflow.script.ProcessConfig - Config settings `withLabel:local` matches labels `local` for process with name downloadcrams:updateMetadata
Nov-05 14:30:12.203 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: local
Nov-05 14:30:12.203 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Nov-05 14:30:12.237 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: getMetadata, downloadcrams:updateMetadata, downloadcrams:saveMetaToJson, downloadcrams:renameATAC, downloadcrams:cramToFastq, findCrams, calculateReadLength, downloadcrams:downloadCram, downloadcrams:calculateReadLength, cramToFastq, downloadCram, updateMetadata, saveMetaToJson, renameATAC, findmeta:findCrams, concatFastqs, findmeta:getMetadata, findmeta:combineMetadata, uploadFTP, findmeta:parseMetadata, parseMetadata, combineMetadata
Nov-05 14:30:12.237 [main] DEBUG nextflow.Session - Igniting dataflow network (11)
Nov-05 14:30:12.244 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:findCrams
Nov-05 14:30:12.244 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:getMetadata
Nov-05 14:30:12.245 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:parseMetadata
Nov-05 14:30:12.246 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > findmeta:combineMetadata
Nov-05 14:30:12.247 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:downloadCram
Nov-05 14:30:12.247 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:cramToFastq
Nov-05 14:30:12.247 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:calculateReadLength
Nov-05 14:30:12.248 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:renameATAC
Nov-05 14:30:12.248 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:saveMetaToJson
Nov-05 14:30:12.249 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > downloadcrams:updateMetadata
Nov-05 14:30:12.250 [main] DEBUG nextflow.script.ScriptRunner - Parsed script files:
  Script_14578705ffc52c59: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/./modules/upload2ftp.nf
  Script_5745e879b58ba523: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/./modules/getfiles.nf
  Script_837af72cfbdb1352: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/main.nf
  Script_a8b23561f1a651ac: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/./modules/metatable.nf
Nov-05 14:30:12.250 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Nov-05 14:30:12.250 [main] DEBUG nextflow.Session - Session await
Nov-05 14:30:12.350 [Actor Thread 34] DEBUG i.s.wave.plugin.config.WaveConfig - Wave strategy not specified - using default: [container, dockerfile, conda, spack]
Nov-05 14:30:12.359 [Actor Thread 34] DEBUG io.seqera.wave.plugin.WaveClient - Wave config: WaveConfig(enabled:null, endpoint:https://wave.seqera.io, containerConfigUrl:[], tokensCacheMaxDuration:30m, condaOpts:CondaOpts(mambaImage=mambaorg/micromamba:1.5.8-lunar; basePackages=conda-forge::procps-ng, commands=null), spackOpts:SpackOpts(basePackages=null, commands=null), strategy:[container, dockerfile, conda, spack], bundleProjectResources:null, buildRepository:null, cacheRepository:null, retryOpts:RetryOpts(delay:450ms, maxDelay:1m 30s, maxAttempts:10, jitter:0.25), httpClientOpts:HttpOpts(), freezeMode:null, preserveFileTimestamp:null)
Nov-05 14:30:12.507 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 14:30:12.510 [Task submitter] INFO  nextflow.Session - [f7/d5054d] Submitted process > findmeta:findCrams (Searching files for sample HCA_SkO13919077)
Nov-05 14:30:13.424 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: findmeta:findCrams (Searching files for sample HCA_SkO13919077); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/f7/d5054d300741fc9007e36fbc4a4b88]
Nov-05 14:30:13.425 [Task monitor] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'TaskFinalizer' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-05 14:30:13.467 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 14:30:13.468 [Task submitter] INFO  nextflow.Session - [cc/784135] Submitted process > findmeta:getMetadata (Getting metadata for /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram)
Nov-05 14:30:14.262 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: findmeta:getMetadata (Getting metadata for /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/cc/7841353cf1ca7001734e5641145d6f]
Nov-05 14:30:14.308 [Actor Thread 51] DEBUG nextflow.util.HashBuilder - Hash asset file sha-256: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/bin/parser.py
Nov-05 14:30:14.325 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 14:30:14.326 [Task submitter] INFO  nextflow.Session - [9f/ffef2c] Submitted process > findmeta:parseMetadata (Parsing metadata for HCA_SkO13919077)
Nov-05 14:30:14.394 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 3; name: findmeta:parseMetadata (Parsing metadata for HCA_SkO13919077); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/9f/ffef2c1f4550f1aa5f012d419c1384]
Nov-05 14:30:14.409 [Actor Thread 62] DEBUG nextflow.util.HashBuilder - Hash asset file sha-256: /nfs/users/nfs_l/lg28/.nextflow/assets/cellgeni/nf-irods-to-fastq/bin/combine_meta.py
Nov-05 14:30:14.422 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Nov-05 14:30:14.423 [Task submitter] INFO  nextflow.Session - [cf/e87893] Submitted process > findmeta:combineMetadata (Combining the metadata for all files to metadata.csv)
Nov-05 14:30:14.523 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 4; name: findmeta:combineMetadata (Combining the metadata for all files to metadata.csv); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/cf/e8789392ab6dfe2b6b2eb54ed754bd]
Nov-05 14:30:14.542 [TaskFinalizer-4] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'PublishDir' minSize=10; maxSize=192; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Nov-05 14:30:14.775 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [LSF] submitted process downloadcrams:downloadCram (Loading /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram) > jobId: 235528; workDir: /nfs/users/nfs_l/lg28/work/00/25ec840344ce46123ddd4a67df9397
Nov-05 14:30:14.776 [Task submitter] INFO  nextflow.Session - [00/25ec84] Submitted process > downloadcrams:downloadCram (Loading /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram)
Nov-05 14:33:22.121 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[jobId: 235528; id: 5; name: downloadcrams:downloadCram (Loading /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram); status: COMPLETED; exit: 0; error: -; workDir: /nfs/users/nfs_l/lg28/work/00/25ec840344ce46123ddd4a67df9397 started: 1730817047113; exited: 2024-11-05T14:32:23.692567Z; ]
Nov-05 14:33:22.382 [Task submitter] DEBUG nextflow.executor.GridTaskHandler - [LSF] submitted process downloadcrams:cramToFastq (Converting cram to fastq: /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram) > jobId: 235692; workDir: /nfs/users/nfs_l/lg28/work/dc/0d53b30de992e2fa11f8646bbb887b
Nov-05 14:33:22.382 [Task submitter] INFO  nextflow.Session - [dc/0d53b3] Submitted process > downloadcrams:cramToFastq (Converting cram to fastq: /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram)
Nov-05 14:35:12.070 [Task monitor] DEBUG n.processor.TaskPollingMonitor - !! executor local > No more task to compute -- The following nodes are still active:
[process] downloadcrams:calculateReadLength
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

[process] downloadcrams:renameATAC
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

[process] downloadcrams:saveMetaToJson
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

[process] downloadcrams:updateMetadata
  status=ACTIVE
  port 0: (value) OPEN  ; channel: input/*.json
  port 1: (cntrl) -     ; channel: $

Nov-05 14:35:17.121 [Task monitor] DEBUG n.processor.TaskPollingMonitor - !! executor lsf > tasks to be completed: 1 -- submitted tasks are shown below
~> TaskHandler[jobId: 235692; id: 6; name: downloadcrams:cramToFastq (Converting cram to fastq: /seq/illumina/runs/47/47737/lane1/plex6/47737_1#6.cram); status: RUNNING; exit: -; error: -; workDir: /nfs/users/nfs_l/lg28/work/dc/0d53b30de992e2fa11f8646bbb887b started: 1730817207118; exited: -; ]
